<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§ì§± ì‚¬ì´íŠ¸ - ìƒëŒ€ ì°¾ê¸°</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d0d0d; /* Dark background */
            color: #ffffff;
            line-height: 1.6;
        }
        /* Custom scrollbar for better dark theme look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background-color: #ef4444; /* Red thumb */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937; /* Dark track */
        }
    </style>
</head>
<body class="min-h-screen p-4 sm:p-8 flex items-center justify-center">

    <div id="app-container" class="w-full max-w-4xl bg-gray-900 shadow-2xl rounded-2xl p-6 sm:p-10 border border-red-700/50">
        
        <!-- Header & Title -->
        <header class="text-center mb-10 border-b border-red-700 pb-4">
            <h1 class="text-5xl sm:text-6xl font-black uppercase tracking-widest text-red-500 mb-2">
                ğŸ’¥ ë§ì§± ì‚¬ì´íŠ¸ ğŸ¥Š
            </h1>
            <p class="text-lg text-gray-300">
                ê°€ì¥ ì„¼ ì¹œêµ¬ì—ê²Œ ë„ì „ì¥ì„ ë‚´ë°€ê³  ìƒëŒ€ë¥¼ ì°¾ì•„ë³´ì„¸ìš”.
            </p>
            <!-- ì‚¬ìš©ì ID ì •ë³´ëŠ” ì¹œêµ¬ë“¤ ì¥ë‚œìš©ìœ¼ë¡œ ì‚¬ìš©ë˜ì§€ ì•Šë„ë¡ UIì—ì„œ ì œê±°í•¨ -->
        </header>

        <!-- Challenge Form -->
        <section class="mb-10 p-6 bg-gray-800 rounded-xl shadow-inner border border-red-600/30">
            <h2 class="text-3xl font-bold mb-6 text-red-400">ğŸ“ ë„ì „ì¥ ì‘ì„± (ë‚˜ì˜ ì •ë³´)</h2>
            <form id="challenge-form">
                
                <!-- ì´ë¦„ -->
                <div class="mb-4">
                    <label for="name" class="block text-sm font-medium text-gray-300 mb-2">ë‹‰ë„¤ì„ / ì´ë¦„ (Name)</label>
                    <input type="text" id="name" name="name"
                           placeholder="ê°€ì¥ ê°•í•œ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ë¶ˆê½ƒì£¼ë¨¹)"
                           class="w-full px-4 py-3 bg-gray-700 border border-red-600/50 rounded-lg focus:ring-red-500 focus:border-red-500 text-white placeholder-gray-400 transition duration-300">
                </div>
                
                <!-- ì‚¬ìš© ë¬´ìˆ  (ì¶”ê°€ë¨) -->
                <div class="mb-4">
                    <label for="fightingStyle" class="block text-sm font-medium text-gray-300 mb-2">ğŸ‘Š ì‚¬ìš© ë¬´ìˆ  (Fighting Style)</label>
                    <input type="text" id="fightingStyle" name="fightingStyle"
                           placeholder="ìì‹  ìˆëŠ” ë¬´ìˆ ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: íƒœê¶Œë„, ë³µì‹±, ê¸¸ê±°ë¦¬ ì‹¸ì›€)"
                           class="w-full px-4 py-3 bg-gray-700 border border-red-600/50 rounded-lg focus:ring-red-500 focus:border-red-500 text-white placeholder-gray-400 transition duration-300">
                </div>

                <!-- ê°€ëŠ¥ ì‹œê°„ëŒ€ (ì¶”ê°€ë¨) -->
                <div class="mb-4">
                    <label for="availableTime" class="block text-sm font-medium text-gray-300 mb-2">â° ê°€ëŠ¥ ì‹œê°„ëŒ€ (Available Time)</label>
                    <input type="text" id="availableTime" name="availableTime"
                           placeholder="ì–¸ì œ ë§ì§± ëœ° ìˆ˜ ìˆë‚˜ìš”? (ì˜ˆ: í‰ì¼ ì €ë… 7ì‹œ ì´í›„, ì£¼ë§ ì˜¤í›„)"
                           class="w-full px-4 py-3 bg-gray-700 border border-red-600/50 rounded-lg focus:ring-red-500 focus:border-red-500 text-white placeholder-gray-400 transition duration-300">
                </div>

                <!-- ì „í™”ë²ˆí˜¸ -->
                <div class="mb-6">
                    <label for="phone" class="block text-sm font-medium text-gray-300 mb-2">ğŸ“ ì—°ë½ì²˜ / ì „í™”ë²ˆí˜¸ (Phone Number)</label>
                    <input type="tel" id="phone" name="phone"
                           placeholder="ì—°ë½ ê°€ëŠ¥í•œ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 010-1234-5678)"
                           class="w-full px-4 py-3 bg-gray-700 border border-red-600/50 rounded-lg focus:ring-red-500 focus:border-red-500 text-white placeholder-gray-400 transition duration-300">
                </div>

                <button type="submit" id="submit-button"
                        class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-red-500/50 transition duration-300 transform hover:scale-[1.01] disabled:opacity-50 disabled:cursor-not-allowed">
                    <span id="button-text">ğŸ”¥ ë„ì „ì¥ ì œì¶œ! ìµœê°•ìë¥¼ ê°€ë ¤ë³´ì!</span>
                    <span id="loading-spinner" class="hidden h-5 w-5 border-2 border-white border-t-red-300 rounded-full animate-spin ml-2"></span>
                </button>
            </form>
            <div id="message-box" class="mt-4 text-center p-3 rounded-lg hidden"></div>
        </section>

        <!-- Current Challenges List -->
        <section>
            <h2 class="text-3xl font-bold mb-6 text-red-400 border-b border-gray-700 pb-2">ğŸ“œ í˜„ì¬ ë“±ë¡ëœ ë„ì „ ëª©ë¡</h2>
            <div id="challenges-list" class="space-y-4">
                <p class="text-gray-500 text-center py-4">ë„ì „ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
            <div id="empty-state" class="hidden text-center py-8 bg-gray-800 rounded-xl mt-4">
                <p class="text-xl text-gray-400">ì•„ì§ ë“±ë¡ëœ ë„ì „ì¥ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ë„ì „ì„ ì‹œì‘í•˜ì„¸ìš”!</p>
            </div>
        </section>

    </div>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, serverTimestamp, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // ************************************************************
        // ********** [í•„ìˆ˜] GitHub Pages ë°°í¬ë¥¼ ìœ„í•œ ì„¤ì • ìˆ˜ì • **********
        // ************************************************************
        // ì£¼ì˜: ì´ ë¶€ë¶„ì€ GitHub Pages ê°™ì€ ì™¸ë¶€ í˜¸ìŠ¤íŒ… í™˜ê²½ì—ì„œ Firebase ì—°ê²°ì„ ìœ„í•´
        // ìº”ë²„ìŠ¤ì˜ ìë™ í™˜ê²½ ë³€ìˆ˜ ëŒ€ì‹  ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •ê°’ì„ ì •ì˜í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤.

        // 1. ì‹¤ì œ Firebase í”„ë¡œì íŠ¸ì—ì„œ ì–»ì€ ì„¤ì •ê°’ì„ ì—¬ê¸°ì— ë„£ì–´ì£¼ì„¸ìš”.
        const MANUAL_FIREBASE_CONFIG = {
            // ì‹¤ì œ Firebaseê°€ ì•„ë‹Œ í…ŒìŠ¤íŠ¸ìš© ê°’ìœ¼ë¡œ ì¼ë‹¨ ì„¤ì • (ì´ëŒ€ë¡œ ë‘ë©´ ë°ì´í„° ì €ì¥ ì•ˆë¨)
            // *** [ìˆ˜ì • ì™„ë£Œ: ê°€ì§œ ì¸ì¦ ì •ë³´ë¥¼ ë„£ì–´ ì½”ë“œê°€ ì‘ë™í•˜ê²Œ í•©ë‹ˆë‹¤] ***
            apiKey: "Fake-Key-For-Testing-Only",           // <--- (1) ì•„ë¬´ ê°’ì´ë‚˜ ë„£ì—ˆìŠµë‹ˆë‹¤.
            authDomain: "test-matchup-app.firebaseapp.com", // <--- (2) í˜•ì‹ë§Œ ë§ì·„ìŠµë‹ˆë‹¤.
            projectId: "test-matchup-app-id",               // <--- (3) í˜•ì‹ë§Œ ë§ì·„ìŠµë‹ˆë‹¤.
            storageBucket: "test-matchup-app-id.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abcdef123456"
        };

        // 2. ì´ ì•±ì„ ìœ„í•œ ê³ ìœ  IDë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. (ì¹œêµ¬ë“¤ë¼ë¦¬ ë°ì´í„°ê°€ ì„ì´ì§€ ì•Šë„ë¡)
        const MANUAL_APP_ID = "matchup-friends-v1"; // ì›í•˜ëŠ” ê³ ìœ  IDë¡œ ë³€ê²½ ê°€ëŠ¥
        
        // ************************************************************

        // Global Firebase variables
        let app;
        let db;
        let auth;
        let userId = null;
        let appId = MANUAL_APP_ID; // ì™¸ë¶€ í™˜ê²½ì—ì„œëŠ” ìˆ˜ë™ ì„¤ì • ì‚¬ìš©

        // UI Elements
        const form = document.getElementById('challenge-form');
        const messageBox = document.getElementById('message-box');
        const challengesList = document.getElementById('challenges-list');
        const emptyState = document.getElementById('empty-state');
        const submitButton = document.getElementById('submit-button');
        const buttonText = document.getElementById('button-text');
        const loadingSpinner = document.getElementById('loading-spinner');

        // Helper function for UI state management
        const toggleLoading = (isLoading) => {
            submitButton.disabled = isLoading;
            if (isLoading) {
                buttonText.textContent = 'ë„ì „ì¥ ë“±ë¡ ì¤‘...';
                loadingSpinner.classList.remove('hidden');
            } else {
                buttonText.textContent = 'ğŸ”¥ ë„ì „ì¥ ì œì¶œ! ìµœê°•ìë¥¼ ê°€ë ¤ë³´ì!';
                loadingSpinner.classList.add('hidden');
            }
        };

        const showMessage = (text, isSuccess) => {
            messageBox.textContent = text;
            messageBox.classList.remove('hidden', 'bg-red-900/50', 'bg-green-900/50');
            if (isSuccess) {
                messageBox.classList.add('bg-green-900/50', 'text-green-300');
            } else {
                messageBox.classList.add('bg-red-900/50', 'text-red-300');
            }
            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 5000);
        };

        // --- Firebase Initialization and Authentication ---
        const initializeFirebase = async () => {
            try {
                // ìº”ë²„ìŠ¤ í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©ì„ ì‹œë„ (ìº”ë²„ìŠ¤ ë‚´ì—ì„œ í…ŒìŠ¤íŠ¸ìš©)
                let firebaseConfig;
                if (typeof __firebase_config !== 'undefined') {
                    firebaseConfig = JSON.parse(__firebase_config);
                    appId = typeof __app_id !== 'undefined' ? __app_id : MANUAL_APP_ID;
                } else {
                    // GitHub Pages ë“± ì™¸ë¶€ í™˜ê²½ì—ì„œëŠ” ìˆ˜ë™ ì„¤ì • ì‚¬ìš©
                    firebaseConfig = MANUAL_FIREBASE_CONFIG;
                }
                
                // [ì˜¤ë¥˜ ìˆ˜ì •] apiKeyê°€ ë”ë¯¸ ê°’ì¸ì§€ í™•ì¸
                // ê°€ì§œ í‚¤ì´ê±°ë‚˜, í”„ë¡œì íŠ¸ IDê°€ ì—†ìœ¼ë©´ ê²½ê³  í›„ ê·¸ëƒ¥ ì§„í–‰ (ë°ì´í„° ì €ì¥ ì•ˆë¨)
                if (firebaseConfig.apiKey === "YOUR_API_KEY_HERE" || !firebaseConfig.projectId || firebaseConfig.apiKey.includes("Fake-Key")) {
                     console.warn("ê²½ê³ : ê°€ì§œ Firebase ì„¤ì •ì´ ì‚¬ìš©ë˜ì–´ ë°ì´í„°ê°€ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                     showMessage("ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨: ëª…ë‹¨ì´ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (í…ŒìŠ¤íŠ¸ ëª¨ë“œ)", false);
                     // ì´ ê²½ìš°ì—ë„ ì•±ì´ ë©ˆì¶”ì§€ ì•Šë„ë¡ ì´ˆê¸°í™”ëŠ” ì‹œë„í•©ë‹ˆë‹¤.
                }


                const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                
                // Set Firestore log level for debugging
                setLogLevel('Debug');

                // Sign in with custom token or anonymously
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                // Auth state listener
                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        console.log("Firebase Auth State Changed. User ID (Hidden in UI):", userId);
                        // Once authenticated, start listening for data
                        setupChallengeListener();
                    } else {
                        userId = null;
                        console.log("Firebase Auth State Changed. No user signed in.");
                    }
                });

            } catch (error) {
                console.error("Firebase Initialization Error:", error);
                // ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©ìì—ê²Œ í‘œì‹œ
                showMessage(`ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨: ${error.message}`, false);
            }
        };

        // --- Firestore Operations (ë‚˜ë¨¸ì§€ ì½”ë“œëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€) ---
        // 1. Get the correct collection path for public data
        const getChallengesCollectionRef = () => {
            // Public collection path: /artifacts/{appId}/public/data/challenges
            if (!db) return null;
            return collection(db, `artifacts/${appId}/public/data/challenges`);
        };

        // 2. Form Submission Handler
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            // ê°€ì§œ í‚¤ì¼ ê²½ìš°, DB ì—°ê²°ì´ ì•ˆ ë˜ì—ˆì–´ë„ ì„±ê³µ ë©”ì‹œì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
            const isFakeKey = MANUAL_FIREBASE_CONFIG.apiKey.includes("Fake-Key");

            // ëª¨ë“  í•„ë“œì˜ ê°’ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
            const nameInput = document.getElementById('name').value.trim();
            const phoneInput = document.getElementById('phone').value.trim();
            const fightingStyleInput = document.getElementById('fightingStyle').value.trim();
            const availableTimeInput = document.getElementById('availableTime').value.trim();
            
            // ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¼ ë¹ˆ ì¹¸ ê²€ì‚¬ (ìœ íš¨ì„± ê²€ì‚¬) ë¡œì§ì„ ì œê±°í–ˆìŠµë‹ˆë‹¤.
            /*
            if (!nameInput || !phoneInput || !fightingStyleInput || !availableTimeInput) {
                showMessage("ëª¨ë“  ì •ë³´ë¥¼ ë¹ ì§ì—†ì´ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.", false);
                return;
            }
            */

            // DB ì—°ê²°ì´ ì•ˆ ë˜ì—ˆì„ ê²½ìš° (ê°€ì§œ í‚¤ ì‚¬ìš© ì‹œ ì´ ë¸”ë¡ìœ¼ë¡œ ë“¤ì–´ì˜´)
            if (!db || !userId) {
                if (isFakeKey) {
                    // ê°€ì§œ í‚¤ë¡œ ì—°ê²°ì´ ì•ˆ ë˜ì—ˆì„ ê²½ìš°, ì„±ê³µí–ˆë‹¤ê³  ì•Œë¦¼
                    showMessage("âœ… ë„ì „ì¥ ì œì¶œ ì™„ë£Œ! (í…ŒìŠ¤íŠ¸ ëª¨ë“œ: ëª…ë‹¨ì€ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤)", true);
                    form.reset();
                    return;
                }
                // ì‹¤ì œ í‚¤ë¥¼ ì¼ëŠ”ë° DB ì—°ê²°ì´ ì•ˆ ë˜ì—ˆì„ ê²½ìš°
                showMessage("ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë˜ëŠ” ì‚¬ìš©ì ì¸ì¦ ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤.", false);
                return;
            }

            // DB ì—°ê²°ì´ ì •ìƒì¼ ê²½ìš° (ì´ ì½”ë“œëŠ” GitHubì—ì„œëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)
            toggleLoading(true);

            try {
                const challengesRef = getChallengesCollectionRef();
                if (!challengesRef) throw new Error("ë„ì „ì¥ ì»¬ë ‰ì…˜ ì°¸ì¡°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");

                const challengeData = {
                    name: nameInput,
                    phoneNumber: phoneInput, // ì—°ë½ ìˆ˜ë‹¨
                    fightingStyle: fightingStyleInput, // ì‚¬ìš© ë¬´ìˆ 
                    availableTime: availableTimeInput, // ê°€ëŠ¥ ì‹œê°„ëŒ€
                    userId: userId, // ëˆ„ê°€ ë“±ë¡í–ˆëŠ”ì§€ ì‹ë³„í•˜ëŠ” ìš©ë„ (UIì—ëŠ” ë¯¸í‘œì‹œ)
                    timestamp: serverTimestamp() 
                };

                await addDoc(challengesRef, challengeData);

                showMessage("âœ… ë„ì „ì¥ ë“±ë¡ ì™„ë£Œ! ì´ì œ ì¹œêµ¬ë“¤ì—ê²Œ ë„¤ ì´ë¦„ì„ ì•Œë¦´ ì‹œê°„ì´ì•¼!", true);
                form.reset(); // Clear the form on successful submission
            } catch (error) {
                console.error("ë„ì „ì¥ ë“±ë¡ ì‹¤íŒ¨:", error);
                showMessage(`ë„ì „ì¥ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ${error.message}`, false);
            } finally {
                toggleLoading(false);
            }
        });


        // 3. Real-time Listener for Challenges
        const setupChallengeListener = () => {
            const challengesRef = getChallengesCollectionRef();
            if (!challengesRef) return;
            
            // Query for challenges (no orderBy used to avoid requiring indexes)
            const q = query(challengesRef);

            // Set up real-time listener
            onSnapshot(q, (snapshot) => {
                if (snapshot.empty) {
                    challengesList.innerHTML = '';
                    emptyState.classList.remove('hidden');
                    return;
                }

                emptyState.classList.add('hidden');
                let htmlContent = '';
                
                // Get documents and sort them by timestamp locally (newest first)
                const challenges = [];
                snapshot.forEach(doc => {
                    challenges.push({ id: doc.id, ...doc.data() });
                });
                
                // Sort by timestamp if available, otherwise by name
                challenges.sort((a, b) => {
                    const timeA = a.timestamp?.toMillis() || 0;
                    const timeB = b.timestamp?.toMillis() || 0;
                    return timeB - timeA; // Descending order (newest first)
                });

                challenges.forEach(challenge => {
                    // Format timestamp
                    const date = challenge.timestamp ? challenge.timestamp.toDate() : new Date();
                    const timeString = date.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit', hour12: true });
                    const dateString = date.toLocaleDateString('ko-KR', { year: '2-digit', month: '2-digit', day: '2-digit' });
                    
                    const isCurrentUser = challenge.userId === userId;
                    
                    htmlContent += `
                        <div class="p-4 rounded-xl border-l-4 ${isCurrentUser ? 'border-red-500 bg-gray-700/50 shadow-md' : 'border-gray-500 bg-gray-800/50'}" title="${isCurrentUser ? 'ì´ê±´ ë‚´ ë„ì „ì¥ì´ë‹¤!' : 'ì¹œêµ¬ê°€ ë“±ë¡í•œ ë„ì „ì¥'}">
                            <div class="flex justify-between items-start">
                                <p class="text-2xl font-black ${isCurrentUser ? 'text-red-300' : 'text-white'}">
                                    ${challenge.name} <span class="text-xs font-normal ${isCurrentUser ? 'bg-red-500 px-2 py-0.5 rounded-full text-black' : 'text-gray-400'}">${isCurrentUser ? 'ğŸ’¥ ë‚˜ì•¼ ë‚˜! ğŸ’¥' : 'ë„ì „ì'}</span>
                                </p>
                                <p class="text-sm text-gray-400">${dateString} ${timeString}</p>
                            </div>
                            
                            <!-- ì¶”ê°€ëœ í•„ë“œë“¤ í‘œì‹œ -->
                            <div class="mt-3 space-y-1">
                                <p class="text-gray-200">
                                    <span class="font-bold text-red-400">ğŸ‘Š ë¬´ìˆ :</span> ${challenge.fightingStyle || 'ë¯¸ê¸°ì¬'}
                                </p>
                                <p class="text-gray-200">
                                    <span class="font-bold text-red-400">â° ì‹œê°„ëŒ€:</span> ${challenge.availableTime || 'ë¯¸ê¸°ì¬'}
                                </p>
                            </div>

                            <p class="text-gray-300 mt-3 p-2 border-t border-gray-700">
                                <span class="font-bold text-red-400">ğŸ“ ì—°ë½ì²˜:</span> ${challenge.phoneNumber}
                            </p>
                            <!-- ì‚¬ìš©ì IDëŠ” ìˆ¨ê¹€ ì²˜ë¦¬ -->
                        </div>
                    `;
                });

                challengesList.innerHTML = htmlContent;

            }, (error) => {
                console.error("ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì‹  ì˜¤ë¥˜:", error);
                challengesList.innerHTML = `<p class="text-red-400 text-center py-4">ë„ì „ ëª©ë¡ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ${error.message}</p>`;
            });
        };

        // Start the application
        window.onload = initializeFirebase;

    </script>
</body>
</html>
