<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>맞짱 사이트 — 테스트용 (안전 중심)</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#ff6b6b; --muted:#9aa4b2;
      --glass: rgba(255,255,255,0.04);
      font-family: "Noto Sans KR", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh; background:
      radial-gradient(ellipse at 10% 10%, rgba(255,107,107,0.06), transparent 10%),
      linear-gradient(180deg, #071129 0%, #071226 50%, #03101a 100%);
      color: #e6eef6;
      display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .wrap{width:100%; max-width:1000px; display:grid; grid-template-columns:1fr 420px; gap:24px;}
    .left{padding:28px; background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); border-radius:12px; box-shadow: 0 6px 30px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03);}
    h1{margin:0 0 8px 0; font-size:22px; letter-spacing:-0.4px}
    p.lead{margin:0 0 18px 0; color:var(--muted); line-height:1.5}
    label{display:block; font-size:13px; color:var(--muted); margin-top:12px}
    input, select, textarea{width:100%; padding:10px 12px; margin-top:6px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:var(--card); color:inherit; outline:none}
    input::placeholder, textarea::placeholder{color:#7f8994}
    .row{display:flex; gap:12px}
    .small{width:48%}
    .btn{display:inline-block; margin-top:14px; padding:10px 14px; border-radius:10px; background:linear-gradient(90deg,var(--accent), #ff9a8b); color:#071226; font-weight:700; border:none; cursor:pointer}
    .mutebtn{background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,0.03)}
    .card{padding:16px; border-radius:10px; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03); margin-top:12px}
    .notice{font-size:13px; color:#ffd9d9; background:rgba(255,107,107,0.06); padding:10px; border-radius:8px; margin-top:12px}
    .list{max-height:56vh; overflow:auto; padding-right:6px}
    .entry{padding:12px; border-radius:8px; background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); border:1px solid rgba(255,255,255,0.02); margin-bottom:10px}
    .meta{font-size:13px; color:var(--muted)}
    footer{font-size:12px; color:var(--muted); margin-top:10px}
    @media(max-width:920px){ .wrap{grid-template-columns:1fr; } .small{width:100%} }
  </style>
</head>
<body>
  <main class="wrap" role="main" aria-labelledby="pageTitle">
    <section class="left" aria-label="등록 폼">
      <h1 id="pageTitle">맞짱 사이트 — 테스트용 (안전 중심)</h1>
      <p class="lead">이 서비스는 **합의된 연습·스파링·경쟁(스포츠/토론 등)**을 위한 연결용 테스트 템플릿입니다. 실전 폭력·불법 행위 목적의 사용은 허용되지 않습니다. 사용 전 반드시 상대 동의와 안전 규칙을 확인하세요.</p>

      <label for="name">이름 (필수)</label>
      <input id="name" placeholder="예: 박진우" />

      <label for="phone">전화번호 (필수)</label>
      <input id="phone" type="tel" placeholder="예: 010-1234-5678" />

      <div class="row">
        <div class="small">
          <label for="sport">종류</label>
          <select id="sport">
            <option>스파링(복싱)</option>
            <option>스파링(MMA)</option>
            <option>태권도/격투기 연습</option>
            <option>대회(토너먼트)</option>
            <option>토론/비교(물리적 충돌 아님)</option>
            <option>기타(기재)</option>
          </select>
        </div>
        <div class="small">
          <label for="level">레벨</label>
          <select id="level">
            <option>초보(연습 필요)</option>
            <option>중급(기초 숙련)</option>
            <option>고급(대회 경험 있음)</option>
            <option>프로/선수급</option>
          </select>
        </div>
      </div>

      <label for="loc">활동지역(선택)</label>
      <input id="loc" placeholder="예: 대전, CBNU 근처 체육관" />

      <label for="avail">가능 시간 / 메모</label>
      <textarea id="avail" rows="3" placeholder="주말 오전 / 헬스장 소속: OOO 체육관 / 장비 보유 등"></textarea>

      <div style="margin-top:12px">
        <input id="agree" type="checkbox" />
        <label for="agree" style="display:inline-block; margin-left:8px; color:var(--muted); font-size:13px">안전 규칙 및 면책 조항을 읽었고, 상대와 합의 후 동의된 방식으로만 만남을 진행합니다. (필수)</label>
      </div>

      <div style="display:flex; gap:10px; align-items:center;">
        <button id="submitBtn" class="btn">등록(미리보기)</button>
        <button id="clearBtn" class="mutebtn btn" style="background:transparent; border:1px solid rgba(255,255,255,0.03)">폼 초기화</button>
      </div>

      <div class="notice" role="status">
        테스트용 템플릿입니다. 실제 운영 시에는 신원 확인, 보험/면책, 시설 안전 확인, 응급연락처 수집, 근거 법률 자문을 반드시 진행하세요.
      </div>

      <div class="card" style="margin-top:12px">
        <strong>개인정보 처리 안내(간단)</strong>
        <p class="meta">이 페이지는 로컬(브라우저)에서만 동작하는 데모입니다. 배포 시 개인정보 저장 방식(백엔드, 암호화, 개인정보처리방침 등)을 반드시 마련하세요.</p>
      </div>

      <footer>
        배포 팁: 이 파일 하나로 GitHub Pages 또는 Netlify(Drag & Drop)로 바로 호스팅 가능합니다.
      </footer>
    </section>

    <aside class="card" aria-label="등록자 목록">
      <h3 style="margin-top:0">등록자 미리보기</h3>
      <div class="list" id="list"></div>

      <div style="display:flex; gap:8px; margin-top:12px;">
        <button id="downloadCsv" class="mutebtn btn">CSV 다운로드</button>
        <button id="clearList" class="mutebtn btn">목록 초기화</button>
      </div>
      <p class="meta" style="margin-top:10px">목록은 로컬 저장(브라우저 localStorage)에만 보관됩니다. 테스트 후 지우려면 '목록 초기화'를 누르세요.</p>
    </aside>
  </main>

  <script>
    // 간단한 로컬 동작 로직 (백엔드 없음)
    const nameEl = document.getElementById('name');
    const phoneEl = document.getElementById('phone');
    const sportEl = document.getElementById('sport');
    const levelEl = document.getElementById('level');
    const locEl = document.getElementById('loc');
    const availEl = document.getElementById('avail');
    const agreeEl = document.getElementById('agree');
    const submitBtn = document.getElementById('submitBtn');
    const clearBtn = document.getElementById('clearBtn');
    const listEl = document.getElementById('list');
    const downloadCsv = document.getElementById('downloadCsv');
    const clearList = document.getElementById('clearList');

    // 유효성: 이름·전화·동의 필수 & 전화 형식 간단 체크
    function validate() {
      if (!nameEl.value.trim()) { alert('이름을 입력하세요.'); nameEl.focus(); return false; }
      const phone = phoneEl.value.trim();
      if (!phone) { alert('전화번호를 입력하세요.'); phoneEl.focus(); return false; }
      const phoneDigits = phone.replace(/[^0-9]/g, '');
      if (phoneDigits.length < 9) { alert('전화번호 형식이 올바르지 않습니다.'); phoneEl.focus(); return false; }
      if (!agreeEl.checked) { alert('안전 규칙 및 면책 조항에 동의해야 합니다.'); return false; }
      return true;
    }

    // 저장: localStorage 기반
    function loadList() {
      const raw = localStorage.getItem('match_list_v1');
      return raw ? JSON.parse(raw) : [];
    }
    function saveList(arr){
      localStorage.setItem('match_list_v1', JSON.stringify(arr));
    }
    function renderList(){
      const arr = loadList();
      listEl.innerHTML = arr.length ? arr.map((e, i) => `
        <div class="entry">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <strong>${escapeHtml(e.name)}</strong>
            <span class="meta">${escapeHtml(e.sport)} · ${escapeHtml(e.level)}</span>
          </div>
          <div class="meta">☎ ${escapeHtml(e.phone)} · ${escapeHtml(e.loc)}</div>
          <div style="margin-top:8px">${escapeHtml(e.avail)}</div>
        </div>
      `).join('') : '<div class="meta">등록자가 없습니다.</div>';
    }

    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

    submitBtn.addEventListener('click', () => {
      if (!validate()) return;
      const entry = {
        name: nameEl.value.trim(),
        phone: phoneEl.value.trim(),
        sport: sportEl.value,
        level: levelEl.value,
        loc: locEl.value.trim(),
        avail: availEl.value.trim(),
        ts: new Date().toISOString()
      };
      const arr = loadList();
      arr.unshift(entry);
      saveList(arr);
      renderList();
      // 간단한 미리보기(알림)
      alert('등록되었습니다. 실제 만남 전 신원 및 안전을 반드시 확인하세요.');
      // 폼 초기화(선택)
      // document.querySelector('form')?.reset();
      nameEl.value=''; phoneEl.value=''; locEl.value=''; availEl.value=''; agreeEl.checked=false;
    });

    clearBtn.addEventListener('click', () => {
      nameEl.value=''; phoneEl.value=''; locEl.value=''; availEl.value=''; agreeEl.checked=false;
    });

    downloadCsv.addEventListener('click', () => {
      const arr = loadList();
      if (!arr.length){ alert('저장된 항목이 없습니다.'); return; }
      const header = ['이름','전화','종류','레벨','활동지역','메모','등록일'];
      const rows = arr.map(r => [r.name, r.phone, r.sport, r.level, r.loc, r.avail, r.ts]);
      const csv = [header, ...rows].map(r => r.map(cell => `"${String(cell).replace(/"/g,'""')}"`).join(',')).join('\n');
      const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'match_list.csv'; a.click();
      URL.revokeObjectURL(url);
    });

    clearList.addEventListener('click', () => {
      if (!confirm('목록을 완전히 삭제합니다. 진행할까요?')) return;
      localStorage.removeItem('match_list_v1');
      renderList();
    });

    // 초기 렌더
    renderList();
  </script>
</body>
</html>


